å…ˆå…¥åŽå‡ºçš„çº¿æ€§æ•°æ®ç»“æž„

![](images/Pasted%20image%2020240610145245.png)

## 5.1.1 Â  æ ˆçš„å¸¸ç”¨æ“ä½œ
`push()`ã€`pop()`ã€`peek()`

## 5.1.2 Â  æ ˆçš„å®žçŽ°
**æ ˆå¯ä»¥è§†ä¸ºä¸€ç§å—é™åˆ¶çš„æ•°ç»„æˆ–é“¾è¡¨**,å¯ä»¥åŽ»æŽ‰ä¸€äº›æ•°ç»„ä¸Žé“¾è¡¨éƒ¨åˆ†æ— å…³æ“ä½œï¼Œä½¿å…¶ä¸º**æ ˆ**

### 1. Â  åŸºäºŽé“¾è¡¨çš„å®žçŽ°
å°†é“¾è¡¨çš„å¤´èŠ‚ç‚¹è§†ä¸ºæ ˆé¡¶ï¼Œå°¾èŠ‚ç‚¹è§†ä¸ºæ ˆåº•
![](images/Pasted%20image%2020240610145513.png)
![](images/Pasted%20image%2020240610145524.png)
![](images/Pasted%20image%2020240610145535.png)

```c
/* åŸºäºŽé“¾è¡¨å®žçŽ°çš„æ ˆ */
typedef struct {
    ListNode *top; // å°†å¤´èŠ‚ç‚¹ä½œä¸ºæ ˆé¡¶
    int size;      // æ ˆçš„é•¿åº¦
} LinkedListStack;

/* æž„é€ å‡½æ•° */
LinkedListStack *newLinkedListStack() {
    LinkedListStack *s = malloc(sizeof(LinkedListStack));
    s->top = NULL;
    s->size = 0;
    return s;
}

/* æžæž„å‡½æ•° */
void delLinkedListStack(LinkedListStack *s) {
    while (s->top) {
        ListNode *n = s->top->next;
        free(s->top);
        s->top = n;
    }
    free(s);
}

/* èŽ·å–æ ˆçš„é•¿åº¦ */
int size(LinkedListStack *s) {
    return s->size;
}

/* åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º */
bool isEmpty(LinkedListStack *s) {
    return size(s) == 0;
}

/* å…¥æ ˆ */
void push(LinkedListStack *s, int num) {
    ListNode *node = (ListNode *)malloc(sizeof(ListNode));
    node->next = s->top; // æ›´æ–°æ–°åŠ èŠ‚ç‚¹æŒ‡é’ˆåŸŸ
    node->val = num;     // æ›´æ–°æ–°åŠ èŠ‚ç‚¹æ•°æ®åŸŸ
    s->top = node;       // æ›´æ–°æ ˆé¡¶
    s->size++;           // æ›´æ–°æ ˆå¤§å°
}

/* è®¿é—®æ ˆé¡¶å…ƒç´  */
int peek(LinkedListStack *s) {
    if (s->size == 0) {
        printf("æ ˆä¸ºç©º\n");
        return INT_MAX;
    }
    return s->top->val;
}

/* å‡ºæ ˆ */
int pop(LinkedListStack *s) {
    int val = peek(s);
    ListNode *tmp = s->top;
    s->top = s->top->next;
    // é‡Šæ”¾å†…å­˜
    free(tmp);
    s->size--;
    return val;
}
```

### 2. Â  åŸºäºŽæ•°ç»„çš„å®žçŽ°
å°†æ•°ç»„çš„å°¾éƒ¨ä½œä¸ºæ ˆé¡¶ï¼›å…¥æ ˆä¸Žå‡ºæ ˆæ“ä½œåˆ†åˆ«å¯¹åº”åœ¨æ•°ç»„å°¾éƒ¨æ·»åŠ å…ƒç´ ä¸Žåˆ é™¤å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½ä¸ºÂ $ð‘‚(1)$Â ã€‚
![](images/Pasted%20image%2020240610145719.png)
![](images/Pasted%20image%2020240610145733.png)
![](images/Pasted%20image%2020240610145744.png)

```c
/* åŸºäºŽæ•°ç»„å®žçŽ°çš„æ ˆ */
typedef struct {
    int *data;
    int size;
} ArrayStack;

/* æž„é€ å‡½æ•° */
ArrayStack *newArrayStack() {
    ArrayStack *stack = malloc(sizeof(ArrayStack));
    // åˆå§‹åŒ–ä¸€ä¸ªå¤§å®¹é‡ï¼Œé¿å…æ‰©å®¹
    stack->data = malloc(sizeof(int) * MAX_SIZE);
    stack->size = 0;
    return stack;
}

/* æžæž„å‡½æ•° */
void delArrayStack(ArrayStack *stack) {
    free(stack->data);
    free(stack);
}

/* èŽ·å–æ ˆçš„é•¿åº¦ */
int size(ArrayStack *stack) {
    return stack->size;
}

/* åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º */
bool isEmpty(ArrayStack *stack) {
    return stack->size == 0;
}

/* å…¥æ ˆ */
void push(ArrayStack *stack, int num) {
    if (stack->size == MAX_SIZE) {
        printf("æ ˆå·²æ»¡\n");
        return;
    }
    stack->data[stack->size] = num;
    stack->size++;
}

/* è®¿é—®æ ˆé¡¶å…ƒç´  */
int peek(ArrayStack *stack) {
    if (stack->size == 0) {
        printf("æ ˆä¸ºç©º\n");
        return INT_MAX;
    }
    return stack->data[stack->size - 1];
}

/* å‡ºæ ˆ */
int pop(ArrayStack *stack) {
    int val = peek(stack);
    stack->size--;
    return val;
}
```