å…ˆå…¥å…ˆå‡ºè§„åˆ™çš„çº¿æ€§æ•°æ®ç»“æž„

![](images/Pasted%20image%2020240610150142.png)

## 5.2.1 Â  é˜Ÿåˆ—å¸¸ç”¨æ“ä½œ
`push()`ã€`pop()`ã€`peek()`

## 5.2.2 Â  é˜Ÿåˆ—å®žçŽ°
### 1. Â  åŸºäºŽé“¾è¡¨çš„å®žçŽ°
![](images/Pasted%20image%2020240610150302.png)
![](images/Pasted%20image%2020240610150312.png)
![](images/Pasted%20image%2020240610150322.png)

```c
/* åŸºäºŽé“¾è¡¨å®žçŽ°çš„é˜Ÿåˆ— */
typedef struct {
    ListNode *front, *rear;
    int queSize;
} LinkedListQueue;

/* æž„é€ å‡½æ•° */
LinkedListQueue *newLinkedListQueue() {
    LinkedListQueue *queue = (LinkedListQueue *)malloc(sizeof(LinkedListQueue));
    queue->front = NULL;
    queue->rear = NULL;
    queue->queSize = 0;
    return queue;
}

/* æžæž„å‡½æ•° */
void delLinkedListQueue(LinkedListQueue *queue) {
    // é‡Šæ”¾æ‰€æœ‰èŠ‚ç‚¹
    while (queue->front != NULL) {
        ListNode *tmp = queue->front;
        queue->front = queue->front->next;
        free(tmp);
    }
    // é‡Šæ”¾ queue ç»“æž„ä½“
    free(queue);
}

/* èŽ·å–é˜Ÿåˆ—çš„é•¿åº¦ */
int size(LinkedListQueue *queue) {
    return queue->queSize;
}

/* åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º */
bool empty(LinkedListQueue *queue) {
    return (size(queue) == 0);
}

/* å…¥é˜Ÿ */
void push(LinkedListQueue *queue, int num) {
    // å°¾èŠ‚ç‚¹å¤„æ·»åŠ  node
    ListNode *node = newListNode(num);
    // å¦‚æžœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ä»¤å¤´ã€å°¾èŠ‚ç‚¹éƒ½æŒ‡å‘è¯¥èŠ‚ç‚¹
    if (queue->front == NULL) {
        queue->front = node;
        queue->rear = node;
    }
    // å¦‚æžœé˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œåˆ™å°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ°å°¾èŠ‚ç‚¹åŽ
    else {
        queue->rear->next = node;
        queue->rear = node;
    }
    queue->queSize++;
}

/* è®¿é—®é˜Ÿé¦–å…ƒç´  */
int peek(LinkedListQueue *queue) {
    assert(size(queue) && queue->front);
    return queue->front->val;
}

/* å‡ºé˜Ÿ */
int pop(LinkedListQueue *queue) {
    int num = peek(queue);
    ListNode *tmp = queue->front;
    queue->front = queue->front->next;
    free(tmp);
    queue->queSize--;
    return num;
}

/* æ‰“å°é˜Ÿåˆ— */
void printLinkedListQueue(LinkedListQueue *queue) {
    int *arr = malloc(sizeof(int) * queue->queSize);
    // æ‹·è´é“¾è¡¨ä¸­çš„æ•°æ®åˆ°æ•°ç»„
    int i;
    ListNode *node;
    for (i = 0, node = queue->front; i < queue->queSize; i++) {
        arr[i] = node->val;
        node = node->next;
    }
    printArray(arr, queue->queSize);
    free(arr);
}
```

### 2. Â  åŸºäºŽæ•°ç»„çš„å®žçŽ°
ä½¿ç”¨ä¸€ä¸ªå˜é‡Â `front`Â æŒ‡å‘é˜Ÿé¦–å…ƒç´ çš„ç´¢å¼•ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªå˜é‡Â `size`Â ç”¨äºŽè®°å½•é˜Ÿåˆ—é•¿åº¦ã€‚å®šä¹‰Â `rear = front + size`Â ï¼Œè¿™ä¸ªå…¬å¼è®¡ç®—å‡ºçš„Â `rear`Â æŒ‡å‘é˜Ÿå°¾å…ƒç´ ä¹‹åŽçš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚

åŸºäºŽæ­¤è®¾è®¡ï¼Œ**æ•°ç»„ä¸­åŒ…å«å…ƒç´ çš„æœ‰æ•ˆåŒºé—´ä¸ºÂ `[front, rear - 1]`**ï¼Œå„ç§æ“ä½œçš„å®žçŽ°æ–¹æ³•å¦‚å›¾ 5-6 æ‰€ç¤ºã€‚

- å…¥é˜Ÿæ“ä½œï¼šå°†è¾“å…¥å…ƒç´ èµ‹å€¼ç»™Â `rear`Â ç´¢å¼•å¤„ï¼Œå¹¶å°†Â `size`Â å¢žåŠ  1 ã€‚
- å‡ºé˜Ÿæ“ä½œï¼šåªéœ€å°†Â `front`Â å¢žåŠ  1 ï¼Œå¹¶å°†Â `size`Â å‡å°‘ 1 ã€‚

å¯ä»¥çœ‹åˆ°ï¼Œå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œéƒ½åªéœ€è¿›è¡Œä¸€æ¬¡æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸ºÂ $ð‘‚(1)$

![](images/Pasted%20image%2020240610150851.png)
![](images/Pasted%20image%2020240610150917.png)
![](images/Pasted%20image%2020240610150946.png)

çŽ¯å½¢æ•°ç»„
> å¯¹äºŽçŽ¯å½¢æ•°ç»„ï¼Œéœ€è¦è®©Â `front`Â æˆ–Â `rear`Â åœ¨è¶Šè¿‡æ•°ç»„å°¾éƒ¨æ—¶ï¼Œç›´æŽ¥å›žåˆ°æ•°ç»„å¤´éƒ¨ç»§ç»­éåŽ†ã€‚è¿™ç§å‘¨æœŸæ€§è§„å¾‹å¯ä»¥é€šè¿‡â€œå–ä½™æ“ä½œâ€æ¥å®žçŽ°ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
```c
/* åŸºäºŽçŽ¯å½¢æ•°ç»„å®žçŽ°çš„é˜Ÿåˆ— */
typedef struct {
    int *nums;       // ç”¨äºŽå­˜å‚¨é˜Ÿåˆ—å…ƒç´ çš„æ•°ç»„
    int front;       // é˜Ÿé¦–æŒ‡é’ˆï¼ŒæŒ‡å‘é˜Ÿé¦–å…ƒç´ 
    int queSize;     // å°¾æŒ‡é’ˆï¼ŒæŒ‡å‘é˜Ÿå°¾ + 1
    int queCapacity; // é˜Ÿåˆ—å®¹é‡
} ArrayQueue;

/* æž„é€ å‡½æ•° */
ArrayQueue *newArrayQueue(int capacity) {
    ArrayQueue *queue = (ArrayQueue *)malloc(sizeof(ArrayQueue));
    // åˆå§‹åŒ–æ•°ç»„
    queue->queCapacity = capacity;
    queue->nums = (int *)malloc(sizeof(int) * queue->queCapacity);
    queue->front = queue->queSize = 0;
    return queue;
}

/* æžæž„å‡½æ•° */
void delArrayQueue(ArrayQueue *queue) {
    free(queue->nums);
    free(queue);
}

/* èŽ·å–é˜Ÿåˆ—çš„å®¹é‡ */
int capacity(ArrayQueue *queue) {
    return queue->queCapacity;
}

/* èŽ·å–é˜Ÿåˆ—çš„é•¿åº¦ */
int size(ArrayQueue *queue) {
    return queue->queSize;
}

/* åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º */
bool empty(ArrayQueue *queue) {
    return queue->queSize == 0;
}

/* è®¿é—®é˜Ÿé¦–å…ƒç´  */
int peek(ArrayQueue *queue) {
    assert(size(queue) != 0);
    return queue->nums[queue->front];
}

/* å…¥é˜Ÿ */
void push(ArrayQueue *queue, int num) {
    if (size(queue) == capacity(queue)) {
        printf("é˜Ÿåˆ—å·²æ»¡\r\n");
        return;
    }
    // è®¡ç®—é˜Ÿå°¾æŒ‡é’ˆï¼ŒæŒ‡å‘é˜Ÿå°¾ç´¢å¼• + 1
    // é€šè¿‡å–ä½™æ“ä½œå®žçŽ° rear è¶Šè¿‡æ•°ç»„å°¾éƒ¨åŽå›žåˆ°å¤´éƒ¨
    int rear = (queue->front + queue->queSize) % queue->queCapacity;
    // å°† num æ·»åŠ è‡³é˜Ÿå°¾
    queue->nums[rear] = num;
    queue->queSize++;
}

/* å‡ºé˜Ÿ */
int pop(ArrayQueue *queue) {
    int num = peek(queue);
    // é˜Ÿé¦–æŒ‡é’ˆå‘åŽç§»åŠ¨ä¸€ä½ï¼Œè‹¥è¶Šè¿‡å°¾éƒ¨ï¼Œåˆ™è¿”å›žåˆ°æ•°ç»„å¤´éƒ¨
    queue->front = (queue->front + 1) % queue->queCapacity;
    queue->queSize--;
    return num;
}
```


